# ุฏููู ุฅุนุฏุงุฏ Cloudflare R2 Storage

## ๐ ุงููุชุทูุจุงุช

ูุจู ุงูุจุฏุกุ ุชุฃูุฏ ุฃู ูุฏูู:
- ุญุณุงุจ Cloudflare ูุน ุงูู Account ID ุงูููุฏู
- ููุงุชูุญ API (Access Key ID ู Secret Access Key)
- ูุนุฑู ุงูู S3 API endpoint

## ๐ ุฎุทูุงุช ุงูุฅุนุฏุงุฏ

### 1. ุฅูุดุงุก Bucket ูู Cloudflare R2

1. ุณุฌู ุงูุฏุฎูู ุฅูู [Cloudflare Dashboard](https://dash.cloudflare.com)
2. ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉุ ุงุฎุชุฑ **R2** 
3. ุฅุฐุง ูู ููู ูุฏูู R2 ููุนูุ ุงุถุบุท ุนูู **Enable R2**
4. ุจุนุฏ ุชูุนูู R2ุ ุงุถุบุท ุนูู **Create bucket**
5. ุฃุฏุฎู ุงุณู ุงูู bucket: **`app-storage`** (ูุฐุง ููู ุฌุฏุงู - ูุฌุจ ุฃู ูููู ุงูุงุณู ูุทุงุจู)
6. ุงุฎุชุฑ ูููุน ุงูุชุฎุฒูู (Location) - ููููู ุงุฎุชูุงุฑ ุงูุฃูุฑุจ ููุณุชุฎุฏููู
7. ุงุถุบุท **Create bucket**

### 2. ุฅูุดุงุก R2 API Token (ุฅุฐุง ูู ููู ูุฏูู)

ุฅุฐุง ูู ููู ูุฏูู ููุงุชูุญ API ุจุนุฏ:

1. ูู ุตูุญุฉ R2ุ ุงุถุบุท ุนูู **Manage R2 API Tokens**
2. ุงุถุบุท **Create API Token**
3. ุงุฎุชุฑ **Object Read & Write** ููุตูุงุญูุงุช
4. ุงุฎุชุฑ ุงูู Bucket: **app-storage**
5. ุงุถุบุท **Create API Token**
6. **ุงุญูุธ ุงูููุงุชูุญ ููุฑุงู** - ูู ุชุชููู ูู ุฑุคูุชูุง ูุฑุฉ ุฃุฎุฑู:
   - Access Key ID
   - Secret Access Key

### 3. ุงูุญุตูู ุนูู Account ID

1. ูู Cloudflare Dashboard
2. ุงุฎุชุฑ ุฃู ูููุน (Zone) ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ
3. ุงูุชูู ุฅูู **Overview**
4. ูู ุงูุฌุงูุจ ุงูุฃููู ุณุชุฌุฏ **Account ID** - ุงูุณุฎู

### 4. ุฅุนุฏุงุฏ ุงูู Bucket ูููุตูู ุงูุนุงู (ุงุฎุชูุงุฑู - ููุตูุฑ ุงูุนุงูุฉ)

ุฅุฐุง ููุช ุชุฑูุฏ ุฃู ุชููู ุตูุฑ ุงูุจุฑููุงูู ุนุงูุฉ (ุบูุฑ ูุญููุฉ):

1. ุงุฐูุจ ุฅูู **R2** โ **app-storage**
2. ุงุถุบุท ุนูู **Settings**
3. ูู ูุณู **Public Access**, ุงุถุบุท **Allow Access**
4. ุณุชุญุตู ุนูู ุฑุงุจุท ูุซู: `https://pub-xxxxx.r2.dev`

**ููุงุญุธุฉ:** ููุตูุฑ ุงูุฎุงุตุฉ (ุฅุซุจุงุชุงุช ุงูุฏูุน)ุ ูุฌุจ ุงุณุชุฎุฏุงู Signed URLs (ููุฐุง ููุฌูุฏ ูู ุงูููุฏ)

### 5. ุฑุจุท ูุทุงู ูุฎุตุต (Custom Domain) - ุงุฎุชูุงุฑู

ุฅุฐุง ุฃุฑุฏุช ุงุณุชุฎุฏุงู ูุทุงูู ุงูุฎุงุต ูุนุฑุถ ุงูุตูุฑ:

1. ูู ุฅุนุฏุงุฏุงุช ุงูู Bucket โ **Settings**
2. ูู ูุณู **Custom Domains**ุ ุงุถุบุท **Connect Domain**
3. ุฃุฏุฎู ุงููุทุงู ุงููุฑุนู (subdomain) ูุซู: `cdn.yourdomain.com`
4. ุงุชุจุน ุงูุชุนูููุงุช ูุฅุนุฏุงุฏ DNS

## โ ุงูุชุญูู ูู ุงูุฅุนุฏุงุฏ

ุจุนุฏ ุฅุชูุงู ุงูุฎุทูุงุช:

1. ุชุฃูุฏ ูู ุฃู Bucket ุงุณูู **`app-storage`** ุจุงูุถุจุท
2. ุชุฃูุฏ ูู ุฃู ูุฏูู:
   - โ Account ID: `8cb0db3d90f1e157c16a59a6a5ebe212`
   - โ Access Key ID
   - โ Secret Access Key
   - โ S3 API Endpoint: `https://8cb0db3d90f1e157c16a59a6a5ebe212.r2.cloudflarestorage.com`

## ๐ ูููู ุงููููุงุช ูู R2

ุงููููุงุช ุณูุชู ุชุฎุฒูููุง ุจุงูุดูู ุงูุชุงูู:

```
app-storage/
โโโ profile-images/          # ุตูุฑ ุงูุจุฑููุงูู
โ   โโโ {user-id}/
โ       โโโ {timestamp}.jpg
โโโ deposit-proofs/          # ุตูุฑ ุฅุซุจุงุช ุงูุฅูุฏุงุน
โ   โโโ {user-id}/
โ       โโโ {timestamp}.jpg
โโโ doctor-documents/         # ูุณุชูุฏุงุช ุงูุฃุทุจุงุก
    โโโ {user-id}/
        โโโ certificates/
        โโโ id-cards/
        โโโ ...
```

## ๐ง ุฅุนุฏุงุฏุงุช ุงูุฃูุงู

### ููุตูุฑ ุงูุนุงูุฉ (ุตูุฑ ุงูุจุฑููุงูู):
- ูููู ุงุณุชุฎุฏุงู Public Access ุฃู Signed URLs
- ุงูููุฏ ุงูุญุงูู ูุณุชุฎุฏู Signed URLs ููู Privacy

### ููุตูุฑ ุงูุฎุงุตุฉ (ุฅุซุจุงุชุงุช ุงูุฏูุน):
- **ูุฌุจ** ุงุณุชุฎุฏุงู Signed URLs ููุท
- ุงูููุฏ ุงูุญุงูู ูููู ุจุฐูู ุชููุงุฆูุงู

## ๐งช ุงุฎุชุจุงุฑ ุงูุฅุนุฏุงุฏ

ุจุนุฏ ุงูุฅุนุฏุงุฏุ ุงุฎุชุจุฑ ุงูุชุทุจูู:

1. **ุฑูุน ุตูุฑุฉ ุจุฑููุงูู:**
   - ุงุฐูุจ ุฅูู ุตูุญุฉ ุงูุจุฑููุงูู
   - ุงุถุบุท ุนูู ุตูุฑุฉ ุงูุจุฑููุงูู
   - ุงุฎุชุฑ ุตูุฑุฉ

2. **ุฑูุน ุฅุซุจุงุช ุฅูุฏุงุน:**
   - ุงุฐูุจ ุฅูู ุตูุญุฉ ุงูุฅูุฏุงุน
   - ุงุฎุชุฑ ุทุฑููุฉ ุงูุฏูุน
   - ุงุฑูุน ุตูุฑุฉ ุงูุฅุซุจุงุช

3. **ุนุฑุถ ุงูุตูุฑ ูู ููุญุฉ ุงููุดุฑู:**
   - ุงุฐูุจ ุฅูู ููุญุฉ ุงููุดุฑู
   - ุงุถุบุท ุนูู "ุนุฑุถ ุฅุซุจุงุช ุงูุฏูุน"
   - ูุฌุจ ุฃู ุชุธูุฑ ุงูุตูุฑุฉ ุจุดูู ุตุญูุญ

## โ ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ

### ุงูุตูุฑ ูุง ุชุธูุฑ:
1. ุชุฃูุฏ ูู ุงุณู ุงูู Bucket: **`app-storage`**
2. ุชุญูู ูู ุตุญุฉ ุงูููุงุชูุญ API
3. ุชุญูู ูู ุฃู Account ID ุตุญูุญ

### ุฎุทุฃ ูู ุงูุฑูุน:
1. ุชุญูู ูู ุตูุงุญูุงุช ุงูู API Token (ูุฌุจ ุฃู ุชููู Read & Write)
2. ุชุญูู ูู ุฃู ุงูู Bucket ููุฌูุฏ
3. ุชุญูู ูู ุญุฌู ุงูููู (ุงูุญุฏ ุงูุฃูุตู 5MB ููุตูุฑ)

### ุฎุทุฃ ูู Signed URLs:
1. ุชุฃูุฏ ูู ุฃู ุงูููุงุชูุญ API ุตุญูุญุฉ
2. ุชุญูู ูู ุฃู ุงูู endpoint ุตุญูุญ

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ูุดุงูู:
1. ุฑุงุฌุน [Cloudflare R2 Documentation](https://developers.cloudflare.com/r2/)
2. ุชุญูู ูู Console ูู ุงููุชุตูุญ ููุฃุฎุทุงุก
3. ุชุฃูุฏ ูู ุฃู ุฌููุน ุงูููุงุชูุญ ุตุญูุญุฉ ูู `src/lib/r2-storage.ts`

## ๐ ุงูุชุฑููุฉ ูู Supabase Storage

ุฅุฐุง ูุงู ูุฏูู ูููุงุช ูุฏููุฉ ูู Supabase Storage:
1. ุณูุชู ุฑูุน ุงููููุงุช ุงูุฌุฏูุฏุฉ ุชููุงุฆูุงู ุฅูู R2
2. ุงููููุงุช ุงููุฏููุฉ ุณุชุณุชูุฑ ูู ุงูุนูู (ุฅุฐุง ูุงูุช URLs ูุงููุฉ)
3. ููููู ููู ุงููููุงุช ุงููุฏููุฉ ูุฏููุงู ุฅุฐุง ุฃุฑุฏุช

---

โ **ุจุนุฏ ุฅุชูุงู ุฌููุน ุงูุฎุทูุงุชุ ุงูุชุทุจูู ุฌุงูุฒ ููุงุณุชุฎุฏุงู!**
